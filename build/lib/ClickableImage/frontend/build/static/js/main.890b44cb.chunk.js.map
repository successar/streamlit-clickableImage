{"version":3,"sources":["ClickableImage.tsx","index.tsx"],"names":["ClickableImage","props","extra","svg","render","args","interactive","ToggleButtonGroup","value","state","type","exclusive","onChange","e","setState","start","end","aria-label","style","margin","size","ToggleButton","shapeRendering","viewBox","width","height","xmlns","ref","onClick","handler","undefined","href","src","x","y","render_row_left_beams","render_col_top_beams","render_row_right_beams","render_col_bottom_beams","render_clicked","row_left_beams","map","beam","index","Fragment","fill","opacity","col_top_beams","row_right_beams","col_bottom_beams","x1","y1","x2","y2","stroke","React","createRef","event","preventDefault","point","this","createSVGPoint","clientX","clientY","matrixTransform","getScreenCTM","inverse","prevState","coordinateOfInterest","Streamlit","setComponentValue","StreamlitComponentBase","withStreamlitConnection","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.890b44cb.chunk.js","sourcesContent":["import {\n    Streamlit,\n    StreamlitComponentBase,\n    withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, { ReactNode } from \"react\"\nimport { ToggleButtonGroup, ToggleButton } from \"@material-ui/lab\";\n\n\ninterface State {\n    type: string,\n    start: number | null,\n    end: number | null\n}\n\n/**\n * This is a React-based component template. The `render()` function is called\n * automatically when your component should be re-rendered.\n */\nclass ClickableImage extends StreamlitComponentBase<State> {\n    extra: number = 6;\n    private svg: any;\n\n    constructor(props: any) {\n        super(props);\n        this.svg = React.createRef();\n        this.state = { start: null, end: null, type: \"row\" }\n    }\n\n    public render = (): ReactNode => {\n        return (\n            <div>\n                {\n                this.props.args.interactive && <ToggleButtonGroup\n                    value={this.state.type}\n                    exclusive\n                    onChange={(e, value) => this.setState(() => ({ type: value, start: null, end: null }))}\n                    aria-label=\"selection type\"\n                    style={{ margin: 2 }}\n                    size=\"small\"\n                >\n                    <ToggleButton value=\"row\" aria-label=\"row\">Row</ToggleButton>\n                    <ToggleButton value=\"col\" aria-label=\"col\">Col</ToggleButton>\n                </ToggleButtonGroup>\n                }\n                <br />\n                <svg shapeRendering=\"optimizeSpeed\"\n                    viewBox={`0 0 ${this.props.args.width + 2 * this.extra + 1} ${this.props.args.height + 2 * this.extra + 1}`}\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    ref={(svg) => this.svg = svg}\n                    onClick={this.props.args.interactive ? (e => this.handler(e)) : undefined} >\n                    <image href={this.props.args.src} width={this.props.args.width} height={this.props.args.height} x={this.extra} y={this.extra} />\n                    {this.render_row_left_beams()}\n                    {this.render_col_top_beams()}\n                    {this.render_row_right_beams()}\n                    {this.render_col_bottom_beams()}\n                    {this.props.args.interactive && this.render_clicked()}\n                </svg>\n            </div>\n        )\n    }\n\n\n    public render_row_left_beams = () => {\n        return this.props.args.row_left_beams.map((beam: number[], index: number) => {\n            return (\n                <React.Fragment>\n                    <rect x={this.extra} y={this.extra + beam[0]} width={this.props.args.width}\n                        height={beam[1] - beam[0]} fill=\"blue\" opacity=\"0.25\" />\n                    <rect x={0} y={this.extra + beam[0]} width={this.extra}\n                        height={beam[1] - beam[0]} fill=\"blue\" opacity=\"1.0\" />\n                </React.Fragment>\n            )\n        })\n    }\n\n    public render_col_top_beams = () => {\n        return this.props.args.col_top_beams.map((beam: any, index: number) => {\n            return (\n                <React.Fragment>\n                    <rect x={this.extra + beam[0]} y={this.extra} height={this.props.args.height}\n                        width={beam[1] - beam[0]} fill=\"red\" opacity=\"0.25\" />\n                    <rect x={this.extra + beam[0]} y={0} height={this.extra}\n                        width={beam[1] - beam[0]} fill=\"red\" opacity=\"1.0\" />\n                </React.Fragment>\n            )\n        })\n    }\n\n    public render_row_right_beams = () => {\n        return this.props.args.row_right_beams.map((beam: number[], index: number) => {\n            return (\n                <React.Fragment>\n                    <rect x={this.extra} y={this.extra + beam[0]} width={this.props.args.width}\n                        height={beam[1] - beam[0]} fill=\"aqua\" opacity=\"0.25\" />\n                    <rect x={this.extra + this.props.args.width} y={this.extra + beam[0]} width={this.extra}\n                        height={beam[1] - beam[0]} fill=\"aqua\" opacity=\"1.0\" />\n                </React.Fragment>\n            )\n        })\n    }\n\n    public render_col_bottom_beams = () => {\n        return this.props.args.col_bottom_beams.map((beam: any, index: number) => {\n            return (\n                <React.Fragment>\n                    <rect x={this.extra + beam[0]} y={this.extra} height={this.props.args.height}\n                        width={beam[1] - beam[0]} fill=\"orchid\" opacity=\"0.25\" />\n                    <rect x={this.extra + beam[0]} y={this.extra + this.props.args.height} height={this.extra + 1}\n                        width={beam[1] - beam[0]} fill=\"orchid\" opacity=\"1.0\" />\n                </React.Fragment>\n            )\n        })\n    }\n\n    public render_clicked = () => {\n        if (this.state.start != null && this.state.end != null) {\n            if (this.state.type == \"row\") {\n                return (\n                    <rect x={this.extra} y={this.extra + this.state.start} width={this.props.args.width}\n                        height={this.state.end - this.state.start} fill=\"black\" opacity=\"1.0\" />\n                )\n            }\n            else {\n                return (\n                    <rect x={this.extra + this.state.start} y={this.extra} height={this.props.args.height}\n                        width={this.state.end - this.state.start} fill=\"black\" opacity=\"1.0\" />\n                )\n            }\n        }\n        else if (this.state.start != null) {\n            if (this.state.type == \"row\") {\n                return (\n                    <line x1={this.extra} y1={this.extra + this.state.start} x2={this.extra + this.props.args.width}\n                        y2={this.extra + this.state.start} stroke=\"black\" />\n                )\n            }\n            else {\n                return (\n                    <line x1={this.extra + this.state.start} y1={this.extra} y2={this.extra + this.props.args.height}\n                        x2={this.extra + this.state.start} stroke=\"black\" />\n                )\n            }\n        }\n    }\n\n    public handler(event: any) {\n        event.preventDefault();\n        let point = this.svg.createSVGPoint();\n        point.x = event.clientX;\n        point.y = event.clientY;\n        point = point.matrixTransform(this.svg.getScreenCTM().inverse());\n        point.x = point.x - this.extra;\n        point.y = point.y - this.extra;\n\n\n        this.setState(\n            function (prevState) {\n                let coordinateOfInterest = ((prevState.type == \"row\") ? point.y : point.x);\n                if (prevState.start === null || prevState.end != null) {\n                    return { \"start\": coordinateOfInterest, end: null, type: prevState.type };\n                }\n                else {\n                    return { \"start\": prevState.start, end: coordinateOfInterest, type: prevState.type };\n                }\n            },\n            () => {\n                if (this.state.start != null && this.state.end != null && this.state.start < this.state.end) {\n                    Streamlit.setComponentValue(this.state)\n                }\n            }\n        );\n    }\n}\n\nexport default withStreamlitConnection(ClickableImage)\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport ClickableImage from \"./ClickableImage\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <ClickableImage />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}